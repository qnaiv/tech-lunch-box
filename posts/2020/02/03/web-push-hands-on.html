<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PWA の WebPush 機能を試した | tech lunch box</title>
    <meta name="description" content=" ">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
    
    <link rel="preload" href="/assets/css/0.styles.d0d00cf0.css" as="style"><link rel="preload" href="/assets/js/app.e0674208.js" as="script"><link rel="preload" href="/assets/js/3.9551da92.js" as="script"><link rel="preload" href="/assets/js/9.d1dc0c66.js" as="script"><link rel="prefetch" href="/assets/js/1.efa22c05.js"><link rel="prefetch" href="/assets/js/10.07bea8fc.js"><link rel="prefetch" href="/assets/js/11.d248abdf.js"><link rel="prefetch" href="/assets/js/12.7ae573d2.js"><link rel="prefetch" href="/assets/js/13.de9ab696.js"><link rel="prefetch" href="/assets/js/14.41cc1924.js"><link rel="prefetch" href="/assets/js/15.08208fc7.js"><link rel="prefetch" href="/assets/js/16.43c77ee9.js"><link rel="prefetch" href="/assets/js/17.8fd6ebd9.js"><link rel="prefetch" href="/assets/js/18.25bbaf97.js"><link rel="prefetch" href="/assets/js/19.c740cec7.js"><link rel="prefetch" href="/assets/js/20.6d16cebe.js"><link rel="prefetch" href="/assets/js/21.f4880b70.js"><link rel="prefetch" href="/assets/js/22.e4afc19f.js"><link rel="prefetch" href="/assets/js/23.d0b5f427.js"><link rel="prefetch" href="/assets/js/24.2d48901e.js"><link rel="prefetch" href="/assets/js/4.9774c40c.js"><link rel="prefetch" href="/assets/js/5.ee303221.js"><link rel="prefetch" href="/assets/js/6.c1a93ad2.js"><link rel="prefetch" href="/assets/js/7.35f74c75.js"><link rel="prefetch" href="/assets/js/8.f0df41e6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d0d00cf0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/lunchbox-logo.png" alt="tech lunch box" class="logo"> <span class="site-name can-hide">tech lunch box</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/posts.html" class="nav-link">
  Posts
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/posts.html" class="nav-link">
  Posts
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PWA の WebPush 機能を試した</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/2020/02/03/web-push-hands-on.html#firebase-導入" class="sidebar-link">Firebase 導入</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#google-アカウントを用意" class="sidebar-link">Google アカウントを用意</a></li><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#nodejs-をインストール" class="sidebar-link">nodejs をインストール</a></li><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#firebase-tools-導入" class="sidebar-link">firebase-tools 導入</a></li><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#firebase-cli-認証設定" class="sidebar-link">firebase-cli 認証設定</a></li><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#プロジェクトに-firebase-を導入する" class="sidebar-link">プロジェクトに Firebase を導入する</a></li></ul></li><li><a href="/posts/2020/02/03/web-push-hands-on.html#手動で通知を飛ばしてみる" class="sidebar-link">手動で通知を飛ばしてみる</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#通知の許可を求める＆デバイストークンを取得する。" class="sidebar-link">通知の許可を求める＆デバイストークンを取得する。</a></li><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#デプロイする" class="sidebar-link">デプロイする</a></li><li class="sidebar-sub-header"><a href="/posts/2020/02/03/web-push-hands-on.html#手動でデバイスに通知を送る" class="sidebar-link">手動でデバイスに通知を送る</a></li></ul></li><li><a href="/posts/2020/02/03/web-push-hands-on.html#firebase-messaging-sw-js-について" class="sidebar-link">firebase-messaging-sw.js について</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pwa-の-webpush-機能を試した"><a href="#pwa-の-webpush-機能を試した" class="header-anchor">#</a> PWA の WebPush 機能を試した</h1> <p>仕事でプッシュ通知について調査する機会があったのでメモ。</p> <h2 id="firebase-導入"><a href="#firebase-導入" class="header-anchor">#</a> Firebase 導入</h2> <p>参考:<br> <a href="https://firebase.google.com/docs/cli?hl=ja" target="_blank" rel="noopener noreferrer">https://firebase.google.com/docs/cli?hl=ja<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="google-アカウントを用意"><a href="#google-アカウントを用意" class="header-anchor">#</a> Google アカウントを用意</h3> <p>Firebase を利用するために Google アカウントが必要。</p> <h3 id="nodejs-をインストール"><a href="#nodejs-をインストール" class="header-anchor">#</a> nodejs をインストール</h3> <p>npm を使うため。</p> <h3 id="firebase-tools-導入"><a href="#firebase-tools-導入" class="header-anchor">#</a> firebase-tools 導入</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -g firebase-tools
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="firebase-cli-認証設定"><a href="#firebase-cli-認証設定" class="header-anchor">#</a> firebase-cli 認証設定</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -g firebase-tools
firebase login // ログイン
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="プロジェクトに-firebase-を導入する"><a href="#プロジェクトに-firebase-を導入する" class="header-anchor">#</a> プロジェクトに Firebase を導入する</h3> <p>プロジェクトディレクトリで以下のコマンドを実行。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>firebase init //プロジェクトディレクトリにfirebaseを設定
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="手動で通知を飛ばしてみる"><a href="#手動で通知を飛ばしてみる" class="header-anchor">#</a> 手動で通知を飛ばしてみる</h2> <h3 id="通知の許可を求める＆デバイストークンを取得する。"><a href="#通知の許可を求める＆デバイストークンを取得する。" class="header-anchor">#</a> 通知の許可を求める＆デバイストークンを取得する。</h3> <p>public ディレクトリに<code>index.html</code> を作成。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;script src=&quot;https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://www.gstatic.com/firebasejs/7.7.0/firebase-messaging.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: &quot;***&quot;,
    authDomain: &quot;***&quot;,
    databaseURL: &quot;***&quot;,
    projectId: &quot;***&quot;,
    storageBucket: &quot;***&quot;,
    messagingSenderId: &quot;***&quot;,
    appId: &quot;***&quot;,
    measurementId: &quot;***&quot;
  };
  const VAPID =
    &quot;公開鍵&quot;;

  // firebaseの初期化
  firebase.initializeApp(firebaseConfig);
  // 通知を許可をユーザに求める
  Notification.requestPermission(function(result) {
    console.log(&quot;User choice&quot;, result);
    if (result !== &quot;granted&quot;) {
      console.log(&quot;No notification permission granted!&quot;);
    } else {
      console.log(&quot;ok!&quot;);
      const messaging = firebase.messaging();
      // 公開鍵を設定
      messaging.usePublicVapidKey(VAPID);

    // トークン取得
      messaging.getToken().then(currentToken =&gt; {
          // デバイストークンがコンソールに出力される。
        console.log(currentToken);
      });
    }
  });
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>public ディレクトリに以下の <code>firebase-messaging-sw.js</code> を作成</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">&quot;https://www.gstatic.com/firebasejs/6.2.4/firebase-app.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">&quot;https://www.gstatic.com/firebasejs/6.2.4/firebase-messaging.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

firebase<span class="token punctuation">.</span><span class="token function">initializeApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  messagingSenderId<span class="token operator">:</span> <span class="token string">&quot;***&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> messaging <span class="token operator">=</span> firebase<span class="token punctuation">.</span><span class="token function">messaging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="デプロイする"><a href="#デプロイする" class="header-anchor">#</a> デプロイする</h3> <p>firebase hosting にデプロイする。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>firebase deploy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="手動でデバイスに通知を送る"><a href="#手動でデバイスに通知を送る" class="header-anchor">#</a> 手動でデバイスに通知を送る</h3> <p>&quot;Send your first message&quot;をクリック
<img src="/assets/img/web-push-hands-on-1.a8cb50ad.png" alt="alt"></p> <p>タイトルとテキストを入力して&quot;テストメッセージを送信&quot;をクリック。
<img src="/assets/img/web-push-hands-on-2.dedfd0cb.png" alt="alt"></p> <p>先ほどコンソールに出ていたトークンをコピペする。
<img src="/assets/img/web-push-hands-on-3.75993d78.png" alt="alt"></p> <p>通知が表示される。
<img src="data:image/png;base64,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" alt="alt"></p> <h2 id="firebase-messaging-sw-js-について"><a href="#firebase-messaging-sw-js-について" class="header-anchor">#</a> firebase-messaging-sw.js について</h2> <p><code>firebase-messaging-sw.js</code>では、メッセージ受信時の処理を書くことができる。
Web アプリがフォアグラウンド時、バックグラウンド時、閉じられている時で処理を分けて書く。</p> <p><a href="https://firebase.google.com/docs/cloud-messaging/js/receive?hl=ja#handle_messages_when_your_web_app_is_in_the_foreground" target="_blank" rel="noopener noreferrer">https://firebase.google.com/docs/cloud-messaging/js/receive?hl=ja#handle_messages_when_your_web_app_is_in_the_foreground<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020-2-3 10:36:43</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e0674208.js" defer></script><script src="/assets/js/3.9551da92.js" defer></script><script src="/assets/js/9.d1dc0c66.js" defer></script>
  </body>
</html>
